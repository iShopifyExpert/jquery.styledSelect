(function(a){a.fn.styledSelectBox=function(e){var h={styled_select_id:null,image_base:null,classes:[],widget_height:null,include_separator_border:true,z_index:null};var b={};var g=this;var f=null;var d=null;var c=null;this.initStyledSelectBox=function(){if(b.styled_select_id==null){throw'StyledSelectBox widget: no "styled_select_id" option was passed.';return}if(b.image_base==null){throw"StyledSelectBox widget: no image base specified.";return}f=a("<div class='styled_select' id='"+b.styled_select_id+"'></div>");d=a("<div class='styled_select_option_display'></div");c=a("<span class='styled_select_arrow'>&nbsp;</span>").css({backgroundImage:"url("+b.image_base+"/small-arrow.png)"});if(b.include_separator_border){var j=f.css("border-left-width")+" "+f.css("border-left-style")+" "+f.css("border-left-color");c.css({borderLeft:j})}f.append(d).append(c);g.addClass("original_select_now_styled");if(b.z_index!=null){f.css({zIndex:b.z_index});g.css({zIndex:(b.z_index+1)})}this.resize();if(b.classes.length>0){for(var k=0;k<b.classes.length;k++){f.addClass(b.classes[k])}}g.after(f);g.on("change",this.setCurrentSelectedText).on("keyup",this.setCurrentSelectedText);f.data("styled_select_options",b);this.setCurrentSelectedText()};this.resize=function(){f.css({width:g.outerWidth()+"px"});d.css({width:(parseInt(f.innerWidth()-c.outerWidth()))+"px"});if(b.widget_height!=null){g.css({height:b.widget_height+"px",lineHeight:(parseInt(b.widget_height)-2)+"px"});f.css({height:b.widget_height+"px"});d.css({height:b.widget_height+"px"});if(a.browser.msie&&parseInt(a.browser.version)<=8){f.css({lineHeight:b.widget_height+"px"})}else{f.css({lineHeight:(parseInt(b.widget_height)-2)+"px"})}}else{d.css({height:g.height()+"px"})}};this.setCurrentSelectedText=function(i){var l=g.get(0);var j=g.find("option");var k=j[l.selectedIndex];if(k!=null){f.find("div.styled_select_option_display").html(k.text)}};if(typeof e=="string"){f=g.next("div.styled_select");d=f.find("div.styled_select_option_display");c=f.find("span.styled_select_arrow");b=f.data("styled_select_options");if(e=="resize"){this.resize()}else{if(e=="update"){this.setCurrentSelectedText()}}}else{b=a.extend(h,e);this.initStyledSelectBox()}return this}})(jQuery);